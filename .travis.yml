# see http://docs.travis-ci.com/user/languages/java/
language: java
jdk:
  - oraclejdk8

# see http://docs.travis-ci.com/user/workers/container-based-infrastructure/
sudo: false

# see http://docs.travis-ci.com/user/caching/#Arbitrary-directories
cache:
  directories:
  - $HOME/.m2

# see http://docs.travis-ci.com/user/notifications/
notifications:
  # see https://docs.travis-ci.com/user/notifications/#email-notifications
  email: false
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/71fae4cb6caecf6ebfe6
    on_success: always  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
  slack:
    secure: MOYGq4zdCZWxJs8L1sIMqMVGLrdild5c05S4fZu7k1WDPGG6wvzCN0/cmZcnTAFBzz1bJ8AvLmq4XBWjacODGV5nw+Ab1ASO2Q4rP3HNpSFC7t/i46/TpPmqJcEdZPSFHnKtIHwvynqoM1ZICZB/7DB+ZMmD2Wf6m592csg5lYFVQoOI7PeH4iarOQ3DoGoG/Yfent9qEPoIPorskPmbVC2MyD0fVf92/0cAFzPgDmzsFri+dNg+SSbfM6I8uVmmvHDeLobYtIJNZF2kn1RnFwfo1nZHyycg7JowURgRKJFvlqOmh3KNfmBRAByiAKIXRA8NsgydBHxvdGM4oK6DCygBz7HHGrPr7J82Hbrj+7aajKRpKW6VuFTdodn5hEGeVJ80GHF7IqjSzr6HC9acSmuTNQOTg8x6t+etnpJs49XCN1JmZYGSjqVfmF0V0yTiImMWBXj0u0DrgIogTTl91pKJf35kk1IJe9SDN9mWllcyEpUfUWrDgnF2N4uNiXnbdOe1ZIAHztt+ACHFRISOm6jIFT1FhOpIjof9AUycQEKegkNC9jX3kHMGfH11nHKF27w2aZ70n1hkz1yFEQHLxaTpgk5+HKBBbi88gPX7RVdMCINpFjm1/PNESPplT6iUMMC4kzMgSU2iySDEwozvA4QAO3+05BJDmuvlKF37kN8=

before_install:
  # decrypt SSH key for OpenShift deployment
  - openssl aes-256-cbc -K $encrypted_104b36b9cec2_key -iv $encrypted_104b36b9cec2_iv -in .openshift/travis-to-openshift.enc -out .openshift/travis-to-openshift -d

after_success:
  # deploy to OpenShift
  - eval "$(ssh-agent -s)" #start the ssh agent
  - chmod 600 .openshift/travis-to-openshift # this key should have push access
  - ssh-add .openshift/travis-to-openshift
  - git remote add deploy ssh://56bdd6ec89f5cfbf07000201@id-sebhoss.rhcloud.com/~/git/id.git/
  - git push --force deploy master

addons:
  # see https://docs.travis-ci.com/user/ssh-known-hosts/
  ssh_known_hosts:
    - id-sebhoss.rhcloud.com